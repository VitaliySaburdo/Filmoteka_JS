{"mappings":"iiBAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,aAGME,EAAkBC,SAASC,cAAc,iBAEzCC,EAAa,IAAI,EAAAJ,EAAAK,SAUvB,SAASC,EAAmBC,GAC1B,IAAMC,EAASD,EACZE,KACC,SAAAC,G,IACEC,EAAED,EAAFC,GACAC,EAAcF,EAAdE,eACAC,EAAWH,EAAXG,YACAC,EAAKJ,EAALI,MACAC,EAASL,EAATK,UACAC,EAAYN,EAAZM,a,MACI,sCACQC,OAD8BN,EAAG,0BAGpCM,OAWf,SAAmBJ,GACjB,OAAIA,EACK,kCAA8CI,OAAZJ,GAEnC,wF,CAjBQK,CACZL,GACA,WAC6BI,OADpBH,EAAM,0FAEWG,OAuBhC,SAAoBL,GAClB,IAAMO,EAAMP,EAAeQ,MAAM,IAEjC,OAAID,EAAIE,QAAU,GACTF,EAAIG,MAAM,EAAG,IAAIC,KAAK,IAAM,MAE9BX,C,CA9B0BY,CAAWZ,GAAgB,2CACFK,OAgC5D,SAAqBF,GACnB,IAAMU,GAAa,EAAAC,EAAAC,gBAAe,cAE5BC,EAAY,GACbC,GAAc,EAAdC,GAAc,EAAdC,OAAcC,E,IAAnB,QAAKC,EAAAC,EAAkBnB,EAASoB,OAAAC,cAA3BP,GAAAI,EAAAC,EAAcG,QAAAC,MAAdT,GAAc,EAAe,CAA7B,IAAMU,EAANN,EAAcO,MACZC,GAAc,EAAdC,GAAc,EAAdC,OAAcX,E,IAAnB,QAAKY,EAAAC,EAAkBpB,EAAUU,OAAAC,cAA5BK,GAAAG,EAAAC,EAAcR,QAAAC,MAAdG,GAAc,GAAd,IAAMK,EAANF,EAAcJ,MACbM,EAASnC,KAAO4B,GAClBX,EAAUmB,KAAKD,EAASE,K,WAFvBN,GAAc,EAAdC,EAAcM,C,aAAdR,GAAc,MAAdI,EAAcK,QAAdL,EAAcK,Q,YAAdR,E,MAAAC,C,aADFb,GAAc,EAAdC,EAAckB,C,aAAdpB,GAAc,MAAdK,EAAcgB,QAAdhB,EAAcgB,Q,YAAdpB,E,MAAAC,C,EAOL,OAAIH,EAAUP,OAAS,EACdO,EAAUN,MAAM,EAAG,GAAGC,KAAK,MAAQ,UAErCK,EAAUL,KAAK,K,CA9CQ4B,CAAYpC,GAAW,OAEjDE,OAcN,SAAmBD,GACjB,OAAIA,EACKA,EAAaI,MAAM,KAAK,GAE1B,E,CApBmDgC,CACtDpC,GACA,gB,IAGHO,KAAK,IAERtB,EAAgBoD,mBAAmB,YAAa7C,E,CA9BlDJ,EAAWkD,YAAYC,MAAK,SAAA7C,G,IAAG8C,EAAM9C,EAAN8C,QAC7B,EAAA9B,EAAA+B,cAAa,aAAcD,E,IAG7BpD,EAAWsD,qBAAqBH,MAAK,SAAAhD,GACnCD,EAAmBC,EAAKoD,Q,gDCZ1B,IAAAC,EAAA7D,EAAA,S,qCAIA,IAAM8D,EAAa,IAAI,EAAA7D,EAAAK,SAGjByD,EAAU5D,SAASC,cAAc,kBACjC4D,EAAU7D,SAASC,cAAc,kB,SAGxB6D,I,OAAAA,EAAfC,EAAAL,EAAA,CAAAK,EAAAC,GAAAC,MAAA,SAAAC,I,IAImBC,EAAAC,EAONC,EAeAC,EAMAC,E,kEA5BMJ,EAAO,W,OAAPC,EAAOI,MAAAC,KAAAC,U,EAAPN,EAAO,W,OAAPA,EAAfL,EAAAL,EAAA,CAAAK,EAAAC,GAAAC,MAAA,SAAAU,I,IACUC,EACEnB,E,yEADFmB,EAAiB5E,SAASC,cAAc,iB,SACpB0D,EAAWH,qB,OAA/BC,EAASoB,EAAAC,KAAPrB,QACRmB,EAAeG,UAAY,GAC3B3E,EAAmBqD,G,4CAJDe,MAAAC,KAAAC,U,EAOtBL,EAAA,WAGI,IAFA,IACMW,EAAgBhF,SAASC,cAAc,eACpCgF,EAAI,EAAGA,EAFH,EAEeA,IAAK,CAC7B,IAAMC,EAAOlF,SAASmF,cAAc,MACpCD,EAAKE,UAAUC,IAAI,QACnBH,EAAKI,YAAc3B,EAAW4B,YAAcN,EAC5CD,EAAcQ,YAAYN,GAC1BA,EAAKO,iBAAiB,SAAS,WAC3B9B,EAAW4B,YAAcL,EAAKI,YAC9BnB,G,MAKZG,EAAA,WACIX,EAAW4B,cACXpB,G,EAIJI,EAAA,WACQZ,EAAW4B,YAAc,IACzB5B,EAAW4B,cACXpB,I,EAlCRN,EAAQ4B,iBAAiB,QAASnB,GAClCV,EAAQ6B,iBAAiB,QAASlB,GAuBlCF,I,4CAzBWP,EAAIU,MAAAC,KAAAC,U,aAAJZ,EAAIU,MAAAC,KAAAC,U,CAwCnBgB,GCnDAhC,EAAA7D,EAAA,S,aAAA,IAGM8F,EAAgB,IAAI,G,cAAAxF,SACpByF,EAAa5F,SAASC,cAAc,gBACpC4F,EAAiB7F,SAASC,cAAc,iBAE9C2F,EAAWH,iBAAiB,U,SAOJK,G,OAATC,EAAQvB,MAAAC,KAAAC,U,IALvB,IACIsB,EAAgB,EAChBC,EAAQ,GACRC,EAAY,G,SAEDH,I,OAAAA,EAAfhC,EAAAL,EAAA,CAAAK,EAAAC,GAAAC,MAAA,SAAAU,EAAwBmB,G,IAImBK,EAA/B1C,EAAS2C,EAAMC,E,yEAHzBP,EAAEQ,iBACFL,EAAQH,EAAES,cAAcC,SAASC,YAAYnE,MAAMoE,O,kBAEJf,EAAcgB,gBACzDV,G,OADqCE,EAEtCtB,EAAAC,KAFOrB,EAA+B0C,EAA/B1C,QAAS2C,EAAsBD,EAAtBC,KAAMC,EAAgBF,EAAhBE,YAGTD,EACdJ,EAAgBK,EAChBH,EAAYzC,E,kDAEZmD,QAAQC,IAAGhC,EAAAiC,I,QAEbjB,EAAed,UAAY,GAC3B3E,EAAmB8F,GACnBU,QAAQC,IAAIb,G,2DAfSxB,MAAAC,KAAAC,U","sources":["src/index.js","src/js/gallery.js","src/js/pagination.js","src/js/search.js"],"sourcesContent":["import './js/fetch';\nimport './js/gallery';\nimport './js/modal';\nimport './js/localStorage';\nimport './js/scroll';\nimport './js/switch-theme';\nimport './js/pagination';\nimport './js/search';\n","import newsApiService from './fetch';\nimport { addToStorage, getFromStorage } from './localStorage';\n\nconst imageGallaryRef = document.querySelector('.gallery-list');\n\nconst ApiService = new newsApiService();\n\nApiService.getGenres().then(({ genres }) => {\n  addToStorage('genresList', genres);\n});\n\nApiService.fetchTrendingMovie().then(data => {\n  renderGalleryFilms(data.results);\n});\n\nfunction renderGalleryFilms(data) {\n  const markup = data\n    .map(\n      ({\n        id,\n        original_title,\n        poster_path,\n        title,\n        genre_ids,\n        release_date,\n      }) => `<li class=\"gallery__item\" data-id=\"${id}\">\n        <img src=\"${renderImg(\n        poster_path\n      )}\" alt=\"${title}\" class=\"gallery_img\" width=\"395\" height=\"574\" />\n        <h2 class=\"gallery__title\">${checkTitle(original_title)}</h2>\n        <p class=\"gallery__txt\">${changeGenre(genre_ids)} | ${checkDate(\n        release_date\n      )}\n      </li>`\n    )\n    .join('');\n\n  imageGallaryRef.insertAdjacentHTML('beforeend', markup);\n\n  function renderImg(poster_path) {\n    if (poster_path) {\n      return `https://image.tmdb.org/t/p/w500${poster_path}`;\n    }\n    return `https://upload.wikimedia.org/wikipedia/commons/c/c2/No_image_poster.png?20170513175923`;\n  }\n\n  function checkDate(release_date) {\n    if (release_date) {\n      return release_date.split('-')[0];\n    }\n    return '';\n  }\n\n  function checkTitle(original_title) {\n    const arr = original_title.split('');\n\n    if (arr.length >= 33) {\n      return arr.slice(0, 33).join('') + '...';\n    }\n    return original_title;\n  }\n\n  function changeGenre(genre_ids) {\n    const genresInfo = getFromStorage('genresList');\n\n    const genrArrey = [];\n    for (const genre_id of genre_ids) {\n      for (const genrInfo of genresInfo) {\n        if (genrInfo.id === genre_id) {\n          genrArrey.push(genrInfo.name);\n        }\n      }\n    }\n    if (genrArrey.length > 2) {\n      return genrArrey.slice(0, 2).join(', ') + ', Other';\n    }\n    return genrArrey.join(', ');\n  }\n}\n\nexport { renderGalleryFilms };\n","import newsApiService from './fetch';\nimport { addToStorage, getFromStorage, moviesDataUpdate } from './localStorage';\nimport { renderGalleryFilms } from './gallery';\n\nconst ApiService = new newsApiService();\n\n;\nconst prevBtn = document.querySelector('.page-btn.prev');\nconst nextBtn = document.querySelector('.page-btn.next');\n\n\nasync function main() {\n    nextBtn.addEventListener('click', onNextBtn);\n    prevBtn.addEventListener('click', onPrevBtn);\n\n    async function getData() {\n        const cardsContainer = document.querySelector('.gallery-list')\n        const { results } = await ApiService.fetchTrendingMovie();\n        cardsContainer.innerHTML = '';\n        renderGalleryFilms(results);\n    }\n\n    function markupPagination() {\n        let coints = 7;\n        const paginationBar = document.querySelector('.pagination');\n        for (let i = 0; i < coints; i++) {\n            const liEl = document.createElement('li');\n            liEl.classList.add('page');\n            liEl.textContent = ApiService.currentPage + i;\n            paginationBar.appendChild(liEl);\n            liEl.addEventListener('click', () => {\n                ApiService.currentPage = liEl.textContent;\n                getData()\n            })\n        }\n    }\n    markupPagination()\n    function onNextBtn() {\n        ApiService.currentPage++;\n        getData()\n\n    }\n\n    function onPrevBtn() {\n        if (ApiService.currentPage > 1) {\n            ApiService.currentPage--;\n            getData()\n        }\n    }\n}\n\nmain();\n","import NewsApiService from './fetch';\nimport { renderGalleryFilms } from './gallery';\n\nconst NewApiService = new NewsApiService();\nconst searchForm = document.querySelector('#header-form');\nconst cardsContainer = document.querySelector('.gallery-list');\n\nsearchForm.addEventListener('submit', onSubmit);\n\nlet currentPage = 1;\nlet amountOfPages = 1;\nlet query = '';\nlet dataArray = [];\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  query = e.currentTarget.elements.searchQuery.value.trim();\n  try {\n    const { results, page, total_pages } = await NewApiService.getFilmOnSearch(\n      query\n    );\n    currentPage = page;\n    amountOfPages = total_pages;\n    dataArray = results;\n  } catch (error) {\n    console.log(error);\n  }\n  cardsContainer.innerHTML = '';\n  renderGalleryFilms(dataArray);\n  console.log(amountOfPages);\n}\n"],"names":["parcelRequire","$5g02X","$6756f0db6f988caf$var$imageGallaryRef","document","querySelector","$6756f0db6f988caf$var$ApiService","default","$6756f0db6f988caf$export$7303e8af20b87c34","data","markup","map","param","id","original_title","poster_path","title","genre_ids","release_date","concat","renderImg","arr","split","length","slice","join","checkTitle","genresInfo","$UL92Z","getFromStorage","genrArrey","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","genre_id","value","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","genrInfo","push","name","err","return","changeGenre","checkDate","insertAdjacentHTML","getGenres","then","genres","addToStorage","fetchTrendingMovie","results","$bpxeT","$dfaf77c789ce7a24$var$ApiService","$dfaf77c789ce7a24$var$prevBtn","$dfaf77c789ce7a24$var$nextBtn","$dfaf77c789ce7a24$var$_main","$parcel$interopDefault","$2TvXO","mark","_callee1","getData","_getData","markupPagination","onNextBtn","onPrevBtn","apply","this","arguments","_callee","cardsContainer","_ctx","sent","innerHTML","paginationBar","i","liEl","createElement","classList","add","textContent","currentPage","appendChild","addEventListener","$dfaf77c789ce7a24$var$main","$d35904b1c7f1c41e$var$NewApiService","$d35904b1c7f1c41e$var$searchForm","$d35904b1c7f1c41e$var$cardsContainer","e","$d35904b1c7f1c41e$var$_onSubmit","$d35904b1c7f1c41e$var$amountOfPages","$d35904b1c7f1c41e$var$query","$d35904b1c7f1c41e$var$dataArray","ref","page","total_pages","preventDefault","currentTarget","elements","searchQuery","trim","getFilmOnSearch","console","log","t0"],"version":3,"file":"index.dd721250.js.map"}