{"mappings":"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","sources":["src/index.js","src/js/gallery.js","src/js/pagination.js","src/js/search.js"],"sourcesContent":["import './js/fetch';\nimport './js/gallery';\nimport './js/modal';\nimport './js/localStorage';\nimport './js/scroll';\nimport './js/switch-theme';\nimport './js/pagination';\nimport './js/search';\n","import newsApiService from './fetch';\nimport { addToStorage, getFromStorage } from './localStorage';\n\nconst imageGallaryRef = document.querySelector('.gallery-list');\n\nconst ApiService = new newsApiService();\n\nApiService.getGenres().then(({ genres }) => {\n  addToStorage('genresList', genres);\n});\n\nApiService.fetchTrendingMovie().then(data => {\n  renderGalleryFilms(data.results);\n});\n\nfunction renderGalleryFilms(data) {\n  const markup = data\n    .map(\n      ({\n        id,\n        original_title,\n        poster_path,\n        title,\n        genre_ids,\n        release_date,\n      }) => `<li class=\"gallery__item\" data-id=\"${id}\">\n        <img src=\"${renderImg(\n        poster_path\n      )}\" alt=\"${title}\" class=\"gallery_img\" width=\"395\" height=\"574\" />\n        <h2 class=\"gallery__title\">${checkTitle(original_title)}</h2>\n        <p class=\"gallery__txt\">${changeGenre(genre_ids)} | ${checkDate(\n        release_date\n      )}\n      </li>`\n    )\n    .join('');\n\n  imageGallaryRef.insertAdjacentHTML('beforeend', markup);\n\n  function renderImg(poster_path) {\n    if (poster_path) {\n      return `https://image.tmdb.org/t/p/w500${poster_path}`;\n    }\n    return `https://upload.wikimedia.org/wikipedia/commons/c/c2/No_image_poster.png?20170513175923`;\n  }\n\n  function checkDate(release_date) {\n    if (release_date) {\n      return release_date.split('-')[0];\n    }\n    return '';\n  }\n\n  function checkTitle(original_title) {\n    const arr = original_title.split('');\n\n    if (arr.length >= 33) {\n      return arr.slice(0, 33).join('') + '...';\n    }\n    return original_title;\n  }\n\n  function changeGenre(genre_ids) {\n    const genresInfo = getFromStorage('genresList');\n\n    const genrArrey = [];\n    for (const genre_id of genre_ids) {\n      for (const genrInfo of genresInfo) {\n        if (genrInfo.id === genre_id) {\n          genrArrey.push(genrInfo.name);\n        }\n      }\n    }\n    if (genrArrey.length > 2) {\n      return genrArrey.slice(0, 2).join(', ') + ', Other';\n    }\n    return genrArrey.join(', ');\n  }\n}\n\nexport { renderGalleryFilms };\n","import newsApiService from './fetch';\nimport { addToStorage, getFromStorage, moviesDataUpdate } from './localStorage';\nimport { renderGalleryFilms } from './gallery';\n\nconst ApiService = new newsApiService();\n\n\n\n\nconst prevBtn = document.querySelector('.page-btn.prev');\nconst nextBtn = document.querySelector('.page-btn.next');\n\n\nasync function main() {\n\n    nextBtn.addEventListener('click', onNextBtn);\n    prevBtn.addEventListener('click', onPrevBtn);\n\n    async function getData() {\n        const cardsContainer = document.querySelector('.gallery-list')\n        const { results } = await ApiService.fetchTrendingMovie();\n        cardsContainer.innerHTML = '';\n        renderGalleryFilms(results);\n    }\n\n    async function markupPagination() {\n\n        const paginationBar = document.querySelector('.pagination');\n        for (let i = 0; i < 9; i++) {\n            const liEl = document.createElement('li');\n            liEl.classList.add('page');\n            liEl.textContent = ApiService.currentPage + i;\n            paginationBar.appendChild(liEl);\n\n\n\n\n            liEl.addEventListener('click', async () => {\n                const data = await ApiService.fetchTrendingMovie();\n                console.log(data);\n\n                ApiService.currentPage = liEl.textContent;\n                getData()\n\n            })\n        }\n\n    }\n    markupPagination()\n    function onNextBtn() {\n        ApiService.currentPage++;\n        getData()\n\n    }\n\n    function onPrevBtn() {\n        if (ApiService.currentPage > 1) {\n            ApiService.currentPage--;\n            getData()\n        }\n    }\n}\n\nmain();\n","import NewsApiService from './fetch';\nimport { renderGalleryFilms } from './gallery';\n\nconst NewApiService = new NewsApiService();\nconst searchForm = document.querySelector('#header-form');\nconst cardsContainer = document.querySelector('.gallery-list');\n\nsearchForm.addEventListener('submit', onSubmit);\n\nlet currentPage = 1;\nlet amountOfPages = 1;\nlet query = '';\nlet dataArray = [];\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  query = e.currentTarget.elements.searchQuery.value.trim();\n  try {\n    const { results, page, total_pages } = await NewApiService.getFilmOnSearch(\n      query\n    );\n    currentPage = page;\n    amountOfPages = total_pages;\n    dataArray = results;\n  } catch (error) {\n    console.log(error);\n  }\n  cardsContainer.innerHTML = '';\n  renderGalleryFilms(dataArray);\n  console.log(amountOfPages);\n}\n"],"names":["parcelRequire","$cyIMT","$7c59f4ec4043ce00$var$imageGallaryRef","document","querySelector","$7c59f4ec4043ce00$var$ApiService","default","$7c59f4ec4043ce00$export$7303e8af20b87c34","data","markup","map","id","original_title","poster_path","title","genre_ids","release_date","renderImg","arr","split","length","slice","join","checkTitle","genresInfo","$31u3U","getFromStorage","genrArrey","genre_id","genrInfo","push","name","changeGenre","checkDate","insertAdjacentHTML","getGenres","then","genres","addToStorage","fetchTrendingMovie","results","$1bab9c519cfa82bc$var$ApiService","$1bab9c519cfa82bc$var$prevBtn","$1bab9c519cfa82bc$var$nextBtn","async","getData","cardsContainer","innerHTML","addEventListener","currentPage","paginationBar","i","liEl","createElement","classList","add","textContent","appendChild","console","log","markupPagination","$1bab9c519cfa82bc$var$main","$b18fd23e9761f35d$var$NewApiService","$b18fd23e9761f35d$var$searchForm","$b18fd23e9761f35d$var$cardsContainer","e","preventDefault","$b18fd23e9761f35d$var$query","currentTarget","elements","searchQuery","value","trim","page","total_pages","getFilmOnSearch","$b18fd23e9761f35d$var$currentPage","$b18fd23e9761f35d$var$amountOfPages","$b18fd23e9761f35d$var$dataArray","error"],"version":3,"file":"index.c21fae1e.js.map"}