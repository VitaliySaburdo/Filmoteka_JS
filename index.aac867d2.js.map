{"mappings":"gfAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,aAGME,EAAkBC,SAASC,cAAc,iBAEzCC,EAAa,IAAI,EAAAJ,EAAAK,SAEvBD,EAAWE,YAAYC,MAAK,SAAAC,G,IAAGC,EAAMD,EAANC,QAE7B,EAAAC,EAAAC,cAAa,aAAcF,E,IAG7BL,EAAWQ,qBAAqBL,MAAK,SAAAM,IAIrC,SAA4BA,GAC1B,IAAMC,EAASD,EACZE,KACC,SAAAP,G,IACEQ,EAAER,EAAFQ,GACAC,EAAcT,EAAdS,eACAC,EAAWV,EAAXU,YACAC,EAAKX,EAALW,MACAC,EAASZ,EAATY,UACAC,EAAYb,EAAZa,a,MACI,sCACQC,OAD8BN,EAAG,0BAGlCM,OAYnB,SAAmBJ,GACjB,OAAIA,EACK,kCAA8CI,OAAZJ,GAEnC,wF,CAlBUK,CACVL,GACA,WAC2BI,OADlBH,EAAM,0FAESG,OAwBlC,SAAoBL,GAClB,IAAMO,EAAMP,EAAeQ,MAAM,IAEjC,OAAID,EAAIE,QAAU,GACTF,EAAIG,MAAM,EAAG,IAAIC,KAAK,IAAM,MAE9BX,C,CA/B4BY,CAAWZ,GAAgB,2CACFK,OAiC9D,SAAqBF,GACnB,IAAMU,GAAa,EAAApB,EAAAqB,gBAAe,cAE5BC,EAAY,GACbC,GAAc,EAAdC,GAAc,EAAdC,OAAcC,E,IAAnB,QAAKC,EAAAC,EAAkBlB,EAASmB,OAAAC,cAA3BP,GAAAI,EAAAC,EAAcG,QAAAC,MAAdT,GAAc,EAAe,CAA7B,IAAMU,EAANN,EAAcO,MACZC,GAAc,EAAdC,GAAc,EAAdC,OAAcX,E,IAAnB,QAAKY,EAAAC,EAAkBnB,EAAUS,OAAAC,cAA5BK,GAAAG,EAAAC,EAAcR,QAAAC,MAAdG,GAAc,GAAd,IAAMK,EAANF,EAAcJ,MACbM,EAASlC,KAAO2B,GAClBX,EAAUmB,KAAKD,EAASE,K,WAFvBN,GAAc,EAAdC,EAAcM,C,aAAdR,GAAc,MAAdI,EAAcK,QAAdL,EAAcK,Q,YAAdR,E,MAAAC,C,aADFb,GAAc,EAAdC,EAAckB,C,aAAdpB,GAAc,MAAdK,EAAcgB,QAAdhB,EAAcgB,Q,YAAdpB,E,MAAAC,C,EAOL,OAAIH,EAAUN,OAAS,EACdM,EAAUL,MAAM,EAAG,GAAGC,KAAK,MAAQ,UAErCI,EAAUJ,KAAK,K,CA/CU2B,CAAYnC,GAAW,OAEjDE,OAeR,SAAmBD,GACjB,OAAIA,EACKA,EAAaI,MAAM,KAAK,GAE1B,E,CArBqD+B,CACtDnC,GACA,gB,IAGHO,KAAK,IAER3B,EAAgBwD,mBAAmB,YAAa3C,E,CAzBhD4C,CAAmB7C,EAAK8C,Q,gDCb1B3D,EAAAD,EAAA,S,WAMmB,IAAI,EAAAC,EAAAK,Q","sources":["src/index.js","src/js/gallery.js","src/js/pagination.js"],"sourcesContent":["import './js/fetch';\nimport './js/gallery';\nimport './js/modal';\nimport './js/localStorage';\nimport './js/scroll';\nimport './js/switch-theme';\nimport './js/pagination';\n","import newsApiService from './fetch';\nimport { addToStorage, getFromStorage } from './localStorage';\n\nconst imageGallaryRef = document.querySelector('.gallery-list');\n\nconst ApiService = new newsApiService();\n\nApiService.getGenres().then(({ genres }) => {\n  //Добавление списка жанров в localStorage\n  addToStorage('genresList', genres);\n});\n\nApiService.fetchTrendingMovie().then(data => {\n  renderGalleryFilms(data.results);\n});\n\nfunction renderGalleryFilms(data) {\n  const markup = data\n    .map(\n      ({\n        id,\n        original_title,\n        poster_path,\n        title,\n        genre_ids,\n        release_date,\n      }) => `<li class=\"gallery__item\" data-id=\"${id}\">\n        <img src=\"${renderImg(\n          poster_path\n        )}\" alt=\"${title}\" class=\"gallery_img\" width=\"395\" height=\"574\" />\n        <h2 class=\"gallery__title\">${checkTitle(original_title)}</h2>\n        <p class=\"gallery__txt\">${changeGenre(genre_ids)} | ${checkDate(\n        release_date\n      )}\n      </li>`\n    )\n    .join('');\n\n  imageGallaryRef.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction renderImg(poster_path) {\n  if (poster_path) {\n    return `https://image.tmdb.org/t/p/w500${poster_path}`;\n  }\n  return `https://upload.wikimedia.org/wikipedia/commons/c/c2/No_image_poster.png?20170513175923`;\n}\n\nfunction checkDate(release_date) {\n  if (release_date) {\n    return release_date.split('-')[0];\n  }\n  return '';\n}\n\nfunction checkTitle(original_title) {\n  const arr = original_title.split('');\n\n  if (arr.length >= 33) {\n    return arr.slice(0, 33).join('') + '...';\n  }\n  return original_title;\n}\n\nfunction changeGenre(genre_ids) {\n  const genresInfo = getFromStorage('genresList');\n\n  const genrArrey = [];\n  for (const genre_id of genre_ids) {\n    for (const genrInfo of genresInfo) {\n      if (genrInfo.id === genre_id) {\n        genrArrey.push(genrInfo.name);\n      }\n    }\n  }\n  if (genrArrey.length > 2) {\n    return genrArrey.slice(0, 2).join(', ') + ', Other';\n  }\n  return genrArrey.join(', ');\n}\n","import newsApiService from './fetch';\nimport {\n  addToStorage,\n  getFromStorage,\n  removeFromStorage,\n} from './localStorage';\nconst ApiService = new newsApiService();\n"],"names":["parcelRequire","$5g02X","$6756f0db6f988caf$var$imageGallaryRef","document","querySelector","$6756f0db6f988caf$var$ApiService","default","getGenres","then","param","genres","$UL92Z","addToStorage","fetchTrendingMovie","data","markup","map","id","original_title","poster_path","title","genre_ids","release_date","concat","$6756f0db6f988caf$var$renderImg","arr","split","length","slice","join","$6756f0db6f988caf$var$checkTitle","genresInfo","getFromStorage","genrArrey","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","genre_id","value","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","genrInfo","push","name","err","return","$6756f0db6f988caf$var$changeGenre","$6756f0db6f988caf$var$checkDate","insertAdjacentHTML","$6756f0db6f988caf$var$renderGalleryFilms","results"],"version":3,"file":"index.aac867d2.js.map"}