{"mappings":"oeAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,aAGA,MAAME,EAAkBC,SAASC,cAAc,iBAEzCC,EAAa,IAAI,EAAAJ,EAAAK,SAEvBD,EAAWE,YAAYC,MAAK,EAACC,OAAEA,OAE7B,EAAAC,EAAAC,cAAa,aAAcF,EAAO,IAGpCJ,EAAWO,qBAAqBJ,MAAKK,KAIrC,SAA4BA,GAC1B,MAAMC,EAASD,EACZE,KACC,EAACC,GACCA,EAAEC,eACFA,EAAcC,YACdA,EAAWC,MACXA,EAAKC,UACLA,EAASC,aACTA,KACI,sCAAsCL,0BAelD,SAAmBE,GACjB,OAAIA,EACK,kCAAkCA,IAEpC,wF,CAlBWI,CACVJ,YACSC,0FA0BnB,SAAoBF,GAClB,MAAMM,EAAMN,EAAeO,MAAM,IAEjC,OAAID,EAAIE,QAAU,GACTF,EAAIG,MAAM,EAAG,IAAIC,KAAK,IAAM,MAE9BV,C,CA/B4BW,CAAWX,4CAkChD,SAAqBG,GACnB,MAAMS,GAAa,EAAAnB,EAAAoB,gBAAe,cAE5BC,EAAY,GAClB,IAAK,MAAMC,KAAYZ,EACrB,IAAK,MAAMa,KAAYJ,EACjBI,EAASjB,KAAOgB,GAClBD,EAAUG,KAAKD,EAASE,MAI9B,OAAIJ,EAAUN,OAAS,EACdM,EAAUL,MAAM,EAAG,GAAGC,KAAK,MAAQ,UAErCI,EAAUJ,KAAK,K,CA/CUS,CAAYhB,QAiB9C,SAAmBC,GACjB,OAAIA,EACKA,EAAaG,MAAM,KAAK,GAE1B,E,CArBqDa,CACtDhB,oBAIHM,KAAK,IAERzB,EAAgBoC,mBAAmB,YAAaxB,E,CAzBhDyB,CAAmB1B,EAAK2B,QAAQ,I","sources":["src/index.js","src/js/gallery.js"],"sourcesContent":["import './js/fetch';\nimport './js/gallery';\nimport './js/modal';\nimport './js/localStorage';\nimport './js/scroll';\nimport './js/switch-theme';\n","import newsApiService from './fetch';\nimport { addToStorage, getFromStorage } from './localStorage';\n\nconst imageGallaryRef = document.querySelector('.gallery-list');\n\nconst ApiService = new newsApiService();\n\nApiService.getGenres().then(({ genres }) => {\n  //Добавление списка жанров в localStorage\n  addToStorage('genresList', genres);\n});\n\nApiService.fetchTrendingMovie().then(data => {\n  renderGalleryFilms(data.results);\n});\n\nfunction renderGalleryFilms(data) {\n  const markup = data\n    .map(\n      ({\n        id,\n        original_title,\n        poster_path,\n        title,\n        genre_ids,\n        release_date,\n      }) => `<li class=\"gallery__item\" data-id=\"${id}\">\n        <img src=\"${renderImg(\n          poster_path\n        )}\" alt=\"${title}\" class=\"gallery_img\" width=\"395\" height=\"574\" />\n        <h2 class=\"gallery__title\">${checkTitle(original_title)}</h2>\n        <p class=\"gallery__txt\">${changeGenre(genre_ids)} | ${checkDate(\n        release_date\n      )}\n      </li>`\n    )\n    .join('');\n\n  imageGallaryRef.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction renderImg(poster_path) {\n  if (poster_path) {\n    return `https://image.tmdb.org/t/p/w500${poster_path}`;\n  }\n  return `https://upload.wikimedia.org/wikipedia/commons/c/c2/No_image_poster.png?20170513175923`;\n}\n\nfunction checkDate(release_date) {\n  if (release_date) {\n    return release_date.split('-')[0];\n  }\n  return '';\n}\n\nfunction checkTitle(original_title) {\n  const arr = original_title.split('');\n\n  if (arr.length >= 33) {\n    return arr.slice(0, 33).join('') + '...';\n  }\n  return original_title;\n}\n\nfunction changeGenre(genre_ids) {\n  const genresInfo = getFromStorage('genresList');\n\n  const genrArrey = [];\n  for (const genre_id of genre_ids) {\n    for (const genrInfo of genresInfo) {\n      if (genrInfo.id === genre_id) {\n        genrArrey.push(genrInfo.name);\n      }\n    }\n  }\n  if (genrArrey.length > 2) {\n    return genrArrey.slice(0, 2).join(', ') + ', Other';\n  }\n  return genrArrey.join(', ');\n}\n"],"names":["parcelRequire","$cyIMT","$7c59f4ec4043ce00$var$imageGallaryRef","document","querySelector","$7c59f4ec4043ce00$var$ApiService","default","getGenres","then","genres","$31u3U","addToStorage","fetchTrendingMovie","data","markup","map","id","original_title","poster_path","title","genre_ids","release_date","$7c59f4ec4043ce00$var$renderImg","arr","split","length","slice","join","$7c59f4ec4043ce00$var$checkTitle","genresInfo","getFromStorage","genrArrey","genre_id","genrInfo","push","name","$7c59f4ec4043ce00$var$changeGenre","$7c59f4ec4043ce00$var$checkDate","insertAdjacentHTML","$7c59f4ec4043ce00$var$renderGalleryFilms","results"],"version":3,"file":"index.d43039b3.js.map"}